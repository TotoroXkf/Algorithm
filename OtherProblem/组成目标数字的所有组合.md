# 组成目标数字的所有组合

## 题型1：每个数字可以重复使用，且无重复元素

>给定一个无重复元素的数组 candidates 和一个目标数 target ，找出 candidates 中所有可以使数字和为 target 的组合。  
>candidates 中的数字可以无限制重复被选取。  
>说明：.  
>所有数字（包括 target）都是正整数。  
>解集不能包含重复的组合。   

>示例 1:  
>输入: candidates = [2,3,6,7], target = 7,  
>所求解集为:  
>[     
>[7],  
  [2,2,3]    
]. 

>示例 2:  
>输入: candidates = [2,3,5], target = 8  
所求解集为:  
[  
  [2,2,2,2],  
  [2,3,3],  
  [3,5]。
]  

**思路**
--------------------

很典型的dfs问题。  
因为不包含重复元素，所以要容易一些  
从当前位置向后遍历，计算target减去当前位置的值，然后递归下去新的target求解即可

**代码**
--------------------

```python
def combination_sum(candidates: list, target: int):
    result, cur = [], []
    search(candidates, result, cur, 0, target)
    return result


def search(candidates: list, result: list, cur: list, position: int, target: int):
    if target == 0:
        result.append(cur)
        return
    for i in range(position, len(candidates)):
        if target - candidates[i] >= 0:
            search(candidates, result, cur + [candidates[i]], i, target - candidates[i])
```

## 题型2：每个数字只可以使用一次，且有重复元素
> 和上面题一样。只不过每个数字只能使用一次

>输入: candidates = [10,1,2,7,6,1,5], target = 8,  
所求解集为:  
[  
  [1, 7],  
  [1, 2, 5],  
  [2, 6],  
  [1, 1, 6]  
]  

**思路**
--------------------

由于包含了重复元素，所以涉及到排查重复值的问题。

首先排序。。。。。。

排好序之后对每个递归的元素要做考虑。如果是刚刚开始的递归的，也就是作为新起点的元素，是不需要考虑重复值问题的。比如 1，1，2 .....这种，第一个1是完全可以和第二个1结合的。但是当第一个1的所有情况遍历完，走到第二个1的时候，就不能再用了，应该跳过、所以判断条件是当前的位置是不是递归开始时的初始位置i == position

除此之外每次递归位置加1即可

**代码**
--------------------
```python
def combination_sum(candidates: list, target: int):
    result, cur = [], []
    candidates.sort()
    search(candidates, result, cur, 0, target)
    return result


def search(candidates: list, result: list, cur: list, position: int, target: int):
    if target == 0:
        result.append(cur)
    if position == len(candidates):
        return
    for i in range(position, len(candidates)):
        if (i == position or candidates[i] != candidates[i - 1]) and target - candidates[i] >= 0:
            search(candidates, result, cur + [candidates[i]], i + 1, target - candidates[i])
```

